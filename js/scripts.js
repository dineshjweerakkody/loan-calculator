var i=[];var u=[{"in":1,value:"Jan"},{"in":2,value:"Feb"},{"in":3,value:"Mar"},{"in":4,value:"Apr"},{"in":5,value:"May"},{"in":6,value:"Jun"},{"in":7,value:"Jul"},{"in":8,value:"Aug"},{"in":9,value:"Sep"},{"in":10,value:"Oct"},{"in":11,value:"Nov"},{"in":12,value:"Dec"}];function o(e){return function(t,n){return n%2?e[t]:t}}$(document).ready(function(){$("#loanAmount").change(function(){s()});$("#interestRate").change(function(){s()});$("#period").change(function(){s()});$("#startMonth").change(function(){s()});$("#startYear").change(function(){s()});$("#reset").click(function(){l()});var t=[];var n=(new Date).getFullYear();for(var e=0;e<30;e++){var a={};a["in"]=n-e;a.value=n-e;t.push(a)}var r=$('script[data-template="options"]').text().split(/\$\{(.+?)\}/g);$("#startYear").append(t.map(function(t){return r.map(o(t)).join("")}));$("#startMonth").append(u.map(function(t){return r.map(o(t)).join("")}))});function l(){p("loanAmount").value=f("0");p("interestRate").value=f("0");p("period").value=c("0");p("startMonth").value="1";p("startYear").value=(new Date).getFullYear();p("monthlyInstallment").value=f("0");p("totInterest").value=f("0");p("totCost").value=f("0");i=[];d()}function p(t){return document.getElementById(t)}function t(t){return document.getElementsByClassName(t)}function a(t){return/^\d*\.?\d*$/.test(t)}function v(t){if(!a(t)){var n=t;t="";for(var e=0;e<n.length;e++){t+=a(n.charAt(e))?n.charAt(e):""}}if(t==""){t="0.00"}return t}var n={minimumFractionDigits:2,maximumFractionDigits:2};function f(t){return Number(t).toLocaleString("en",n)}var e={minimumFractionDigits:0,maximumFractionDigits:0};function c(t){return Number(t).toLocaleString("en",e)}function s(){p("loanAmount").value=f(v(p("loanAmount").value));p("interestRate").value=f(v(p("interestRate").value));p("period").value=c(v(p("period").value));var t=parseFloat(v(p("interestRate").value))/1200;var n=parseInt(v(p("period").value));var e=parseFloat(v(p("loanAmount").value));var a=m(t,n,e)*-1;p("monthlyInstallment").value=f(v(a));var r=parseInt(v(p("startYear").value));var u=parseInt(v(p("startMonth").value));i=g(e,a,n,t,r,u);d()}function m(t,n,e,a,r){if(!a)a=0;if(!r)r=0;if(t==0)return-(e+a)/n;var u=Math.pow(1+t,n);var i=t/(u-1)*-(e*u+a);if(r==1){i/=1+t}return i}function d(){var n=$('script[data-template="row"]').text().split(/\$\{(.+?)\}/g);$("#itembody").empty();$("#itembody").append(i.map(function(t){return n.map(o(t)).join("")}))}function g(t,n,e,a,r,u){var i=t;var o=[];var l=0,v=0,c=0;for(var s=0;s<e;++s){var m={};v=Math.round(i*a*100)/100;l+=v;c=n-v;m.payMonth=h(u)+"/"+r;u++;if(u>12){u=1;r++}m.rowNo=s+1;m.beginBalance=f(i);m.installment=f(n);m.interest=f(v);m.principal=f(c);i=i-c;m.endBalance=f(i);o.push(m)}p("totInterest").value=f(l);p("totCost").value=f(t+l);return o}function h(t){for(var n=0;n<u.length;n++){if(u[n]["in"]==t){return u[n].value}}}